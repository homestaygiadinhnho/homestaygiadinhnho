---
layout: 
title: "Karaoke Sao Mai"
permalink: /saomai
description: "Sao Mai Media - Nơi bạn thăng hoa cảm xúc với dịch vụ Karaoke đẳng cấp."
---

<!DOCTYPE html>
<html lang="vi">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Karaoke với YouTube</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <style>
    @font-face {
      font-family: saomaiMedia;
      font-style: normal;
      font-display: swap;
      src: url(https://homestaygiadinhnho.github.io/assets/fonts/SpotifyMixUI-Regular.woff2) format("woff2");
      font-weight: 400;
    }

    @font-face {
      font-family: saomaiMedia;
      font-style: normal;
      font-display: swap;
      src: url(https://homestaygiadinhnho.github.io/assets/fonts/SpotifyMixUITitle-Bold.woff2) format("woff2");
      font-weight: 700;
    }

    @font-face {
      font-display: swap;
      font-family: ui-icons;
      src: url(https://homestaygiadinhnho.github.io/assets/fonts/ui-icons.woff2) format("woff2");
    }

    .ld {
      -moz-osx-font-smoothing: grayscale;
      -webkit-font-smoothing: antialiased;
      display: inline-block;
      font: normal normal normal 16px / 1 ui-icons;
      font-size: inherit;
    }

    .ld.ld-Play:before {
      content: "\f19a";
    }

    .ld.ld-Selected:before {
      content: "\f1a9";
    }

    .ld.ld-Heart:before {
      content: "\f168";
    }

    .ld.ld-Service:before {
      content: "\f1b3";
    }

    .ld.ld-Ads:before {
      content: "\f16c";
    }

    .line-clamp-2 {
      display: -webkit-box;
      -webkit-box-orient: vertical;
      -webkit-line-clamp: 2;
      overflow: hidden;
      min-height: 1.75rem;
      max-height: 3.5rem;
    }

    body {
      font-family: saomaiMedia;
      background-color: white;
      color: black;
    }

    .bottom-nav {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background-color: #f7fafc;
      color: black;
      display: flex;
      justify-content: space-around;
      padding: 1rem;
      box-shadow: 0 -2px 5px rgba(0, 0, 0, 0.3);
    }

    .bottom-nav div {
      text-align: center;
    }

    .bottom-nav i {
      font-size: 24px;
      margin-bottom: 0.25rem;
    }

    .badge-shape-wiz__text {
      background: rgba(0, 0, 0, 0.9);
      font-weight: 700;
      padding: 0 4px;
    }

    #videoList>div:first-child {
      margin-top: 24px;
    }

    #videoList>div:last-child {
      margin-bottom: 92px;
    }

    .bg-green-500 {
      background-color: #38a169;
    }

    .hover\:bg-green-400:hover {
      background-color: #48bb78;
    }

    .bg-black {
      background-color: white;
    }

    .text-white {
      color: black;
    }

    .shadow-lg {
      background: #f7fafc;
    }
  </style>
  <script>
    // Khởi tạo Supabase
    const supabaseUrl = 'https://wndajplczagmlxbvkmtk.supabase.co';
    const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InduZGFqcGxjemFnbWx4YnZrbXRrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MjgwMTUzNDcsImV4cCI6MjA0MzU5MTM0N30.1ffeOEC-jOQtar3tgD8OPBUeyK79itCPYmBe3_k08MA';
    const supabaseClient = supabase.createClient(supabaseUrl, supabaseKey);

    // Hàm tìm kiếm video
    function searchVideos() {
      const query = $('#searchInput').val();
      const apiKey = 'AIzaSyDXo9tP0rycwrE4tpXokP1AggTRP7Zt2B4';
      const url = `https://www.googleapis.com/youtube/v3/search?part=snippet&maxResults=20&q=${query}+karaoke&type=video&key=${apiKey}`;

      $.getJSON(url, function (data) {
        $('#videoList').empty(); // Xóa danh sách video cũ

        // Lấy videoIds để tìm thêm thông tin từ video API
        const videoIds = data.items.map(item => item.id.videoId).join(',');
        const videoDetailsUrl = `https://www.googleapis.com/youtube/v3/videos?part=contentDetails,statistics&id=${videoIds}&key=${apiKey}`;

        $.getJSON(videoDetailsUrl, function (videoDetailsData) {
          // Hiển thị thông tin video
          $.each(data.items, function (index, item) {
            const videoId = item.id.videoId;
            const title = item.snippet.title;
            const channelTitle = item.snippet.channelTitle;
            const thumbnailUrl = item.snippet.thumbnails.medium.url;
            const channelThumbnailUrl = item.snippet.thumbnails.default.url;
            const publishedAt = item.snippet.publishedAt;

            // Thông tin chi tiết từ videoDetailsData
            const viewCount = videoDetailsData.items[index].statistics.viewCount;
            const duration = formatDuration(videoDetailsData.items[index].contentDetails.duration);

            // Tạo video item
            const videoItem = $('<div>', { class: 'rounded cursor-pointer flex w-full flex-col' });

            // Tạo phần hình ảnh (thumbnail)
            const thumbnailContainer = $('<div>', { class: 'relative' });
            const thumbnail = $('<img>', {
              src: thumbnailUrl,
              class: 'w-full h-60',
              css: { objectFit: 'cover' }
            });
            const durationOverlay = $('<div>', { class: 'thumbnail-overlay-badge-shape absolute bottom-0 right-0 m-2' });
            const badgeText = $('<div>', { class: 'badge-shape-wiz__text', text: duration });

            durationOverlay.append(badgeText);
            thumbnailContainer.append(thumbnail).append(durationOverlay);

            // Tạo phần avatar và thông tin video
            const avatarContainer = $('<div>', { class: 'flex items-center', css: { margin: '8px 0 0 16px' } });
            const avatar = $('<img>', {
              src: channelThumbnailUrl,
              class: 'rounded-full w-10 h-10',
              css: { objectFit: 'cover' }
            });
            const videoInfo = $('<div>', { class: 'ml-3 text-left' })
              .html(`<p class="text-white font-bold text-xl line-clamp-2">${title}</p>
                      <p class="text-gray-400 text-sm">${channelTitle} • ${formatViews(viewCount)} • ${formatDate(publishedAt)}</p>`);

            avatarContainer.append(avatar).append(videoInfo);

            // Nút chọn bài hát
            const selectButton = $('<button>', {
              text: 'Tôi chọn hát bài này',
              class: 'bg-green-500 hover:bg-green-400 p-2 rounded-sm text-white mt-2 font-bold',
              css: { margin: '8px 16px', background: 'brown' },
              click: () => handleSongSelection(videoId, title)
            });

            videoItem.append(thumbnailContainer).append(avatarContainer).append(selectButton);
            $('#videoList').append(videoItem);
          });
        });
      });
    }

    // Hàm xử lý chọn bài hát
    function handleSongSelection(videoId, title) {
      const name = prompt("Nhập tên của bạn:");
      const age = prompt("Nhập tuổi của bạn:");
      if (name && age) {
        saveSong(videoId, name, age)
          .then(() => {
            window.location.href = 'https://homestaygiadinhnho.github.io/chonbai';
          })
          .catch((error) => {
            alert("Đã xảy ra lỗi khi lưu thông tin. Vui lòng thử lại.");
          });
      }
    }

    // Hàm lưu thông tin bài hát vào Supabase
    function saveSong(videoId, name, age) {
      return supabaseClient.from('karaoke_songs').insert([{ video_id: videoId, name: name, age: age }]);
    }

    // Format ngày
    function formatDate(dateString) {
      const date = new Date(dateString);
      return date.toLocaleDateString('vi-VN');
    }

    // Format số lượt xem
    function formatViews(views) {
      return views > 1000000 ? (views / 1000000).toFixed(1) + 'Tr lượt xem' : views > 1000 ? (views / 1000).toFixed(1) + 'N lượt xem' : views + ' lượt xem';
    }

    // Format thời gian (YouTube duration format -> hh:mm:ss)
    function formatDuration(duration) {
      const match = duration.match(/PT(\d+H)?(\d+M)?(\d+S)?/);
      const hours = match[1] ? match[1].slice(0, -1).padStart(2, '0') : '00';
      const minutes = match[2] ? match[2].slice(0, -1).padStart(2, '0') : '00';
      const seconds = match[3] ? match[3].slice(0, -1).padStart(2, '0') : '00';
      return `${hours}:${minutes}:${seconds}`;
    }
  </script>
</head>

<body class="bg-black">
  <div class="container mx-auto py-10 text-white">
    <div class="text-center text-3xl font-bold mb-6">Tìm kiếm bài hát Karaoke</div>

    <!-- Search Bar -->
    <div class="flex justify-center mb-10">
      <input id="searchInput" type="text" class="p-3 rounded-md w-1/2" placeholder="Nhập tên bài hát karaoke...">
      <button onclick="searchVideos()" class="bg-green-500 hover:bg-green-400 text-white p-3 rounded-md ml-4">Tìm kiếm</button>
    </div>

    <!-- Video List -->
    <div id="videoList" class="grid grid-cols-1 gap-8"></div>
  </div>

  <!-- Bottom Navigation -->
  <div class="bottom-nav">
    <div>
      <i class="ld ld-Play"></i>
      <div>Đang phát</div>
    </div>
    <div>
      <i class="ld ld-Selected"></i>
      <div>Danh sách</div>
    </div>
    <div>
      <i class="ld ld-Heart"></i>
      <div>Yêu thích</div>
    </div>
    <div>
      <i class="ld ld-Service"></i>
      <div>Dịch vụ</div>
    </div>
    <div>
      <i class="ld ld-Ads"></i>
      <div>Quảng cáo</div>
    </div>
  </div>
</body>

</html>
