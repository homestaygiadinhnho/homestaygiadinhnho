---
layout: 
title: "Karaoke Sao Mai"
permalink: /saomai
description: "Sao Mai Media - Nơi bạn thăng hoa cảm xúc với dịch vụ Karaoke đẳng cấp."
---

<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Karaoke với YouTube</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
    <script>
        // Khởi tạo Supabase
        const supabaseUrl = 'https://wndajplczagmlxbvkmtk.supabase.co'; // Thay bằng URL của bạn
        const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InduZGFqcGxjemFnbWx4YnZrbXRrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MjgwMTUzNDcsImV4cCI6MjA0MzU5MTM0N30.1ffeOEC-jOQtar3tgD8OPBUeyK79itCPYmBe3_k08MA'; // Thay bằng Anon Key của bạn
        const supabaseClient = supabase.createClient(supabaseUrl, supabaseKey);

        // Hàm tìm kiếm video
        function searchVideos() {
            const query = document.getElementById('searchInput').value;
            const apiKey = 'AIzaSyDXo9tP0rycwrE4tpXokP1AggTRP7Zt2B4'; // Thay bằng API Key của bạn
            const url = `https://www.googleapis.com/youtube/v3/search?part=snippet&maxResults=5&q=${query}+karaoke&type=video&key=${apiKey}`;

            fetch(url)
                .then(response => response.json())
                .then(data => {
                    const videoList = document.getElementById('videoList');
                    videoList.innerHTML = ''; // Xóa danh sách video trước đó
                    data.items.forEach(item => {
                        const videoId = item.id.videoId;
                        const title = item.snippet.title;

                        const videoItem = document.createElement('div');
                        videoItem.classList.add('bg-gray-800', 'p-4', 'rounded', 'cursor-pointer');

                        const videoInfo = document.createElement('div');
                        videoInfo.innerHTML = `<p>${title}</p>`;

                        const selectButton = document.createElement('button');
                        selectButton.textContent = "Hát Ngay";
                        selectButton.classList.add('bg-green-500', 'hover:bg-green-400', 'p-2', 'rounded-lg', 'text-black');
                        selectButton.onclick = () => {
                            const name = prompt("Nhập tên của bạn:");
                            const age = prompt("Nhập tuổi của bạn:");
                            if (name && age) {
                                saveSong(videoId, name, age);
                            } else {
                                alert("Bạn phải nhập đầy đủ tên và tuổi!");
                            }
                        };

                        videoItem.appendChild(videoInfo);
                        videoItem.appendChild(selectButton);
                        videoList.appendChild(videoItem);
                    });
                })
                .catch(error => console.log(error));
        }

        // Hàm lưu bài hát vào Supabase
        async function saveSong(videoId, name, age) {
            console.log("Saving song:", { videoId, name, age });
            const { data, error } = await supabaseClient
                .from('karaoke_songs')
                .insert([{ name: name, age: age, video_id: videoId }]);

            if (error) {
                console.error('Lỗi khi lưu bài hát: ', error);
            } else {
                alert('Bài hát đã được lưu vào Supabase!');
            }
        }
    </script>
</head>
<body class="bg-gray-900 text-white">
    <div class="container mx-auto py-10 text-center">
        <h1 class="text-4xl font-bold mb-6">Karaoke với YouTube</h1>
        <input type="text" id="searchInput" placeholder="Tìm kiếm bài hát karaoke..." class="p-2 text-black w-1/2 mb-4">
        <button onclick="searchVideos()" class="bg-blue-500 p-2 rounded">Tìm Kiếm</button>

        <div id="videoList" class="grid grid-cols-1 gap-4 mt-8"></div>

        <div id="player" class="mt-10">
            <div id="youtubePlayer" class="w-full h-64"></div>
        </div>
    </div>
    <script src="https://www.youtube.com/iframe_api"></script>
</body>
</html>
